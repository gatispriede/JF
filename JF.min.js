/**
 * Copyright (C) 2014 Funisimo
 */
var JF=function(){};JF.debug=function(){return"undefined"!=typeof arguments[0]?("undefined"==typeof JF.debug.items&&(JF.debug.items={}),JF.debug.items[Date()]={message:arguments[0],content:arguments[1]},!0):JF.debug.items};var JFcore={init:function(){JFcore.createJF(),JF.status="Init",JFcore.createGlobalFunctions(),JFcore.createGlobalFunctions.description="Creates Global functions",JF.watch("status",JF.setStatus),JF.status="Done loading Framework",JFcore.init=null,JFcore=null},createJF:function(){return JF.events={},JF.stringify=function(){var a=0;"undefined"!=typeof arguments[1]&&(a=arguments[1]+1);var b="{";for(var c in arguments[0])switch(typeof arguments[0][c]){case"string":b+='"'+c+'"'+":"+'"'+arguments[0][c]+'",';break;case"object":b+='"'+c+'"'+":"+JF.stringify(arguments[0][c],a)+",";break;case"function":if(arguments[0].hasOwnProperty(c)){arguments[0][c]=arguments[0][c].toLocaleString().replace('"','"').replace(/(\r\n|\n|\r)/gm,"").replace(/\s+/g,""),b+='"'+c+'"'+":"+'"'+arguments[0][c]+'",';break}}return b+="}",b=b.replace(",}","}")},JF.private=function(){return"undefined"==typeof arguments[0]||"undefined"==typeof arguments[1]||"undefined"==typeof arguments[2]?!1:(Object.defineProperty(arguments[0],arguments[1],{writable:!1,enumerable:!1,configurable:!1,value:arguments[2]}),void 0)},JF.public=function(){return"undefined"==typeof arguments[0]||"undefined"==typeof arguments[1]||"undefined"==typeof arguments[2]?!1:(Object.defineProperty(arguments[0],arguments[1],{writable:!0,enumerable:!0,configurable:!0,value:arguments[2]}),void 0)},JF.setStatus=function(){status=arguments[2]},!0},createGlobalFunctions:function(){function a(){var a=arguments[0];return"undefined"==typeof a?!1:("object"==typeof a&&"undefined"!=typeof a.value&&"undefined"!=typeof a.name&&(JF.public(this,a.name,a.value),"undefined"==typeof JF.global&&JF.public(JF,"global",[]),JF.global.push(a.name),"undefined"!=typeof a.description&&(a.name.description=a.description)),void 0)}var b={name:"log",value:function(){console.log(arguments)}};a(b),b={name:"clearTimeouts",value:function(){for(var a=1;1e3>a;a++)clearTimeout(a)},description:"Clears all timeouts"},a(b),b={name:"type",value:function(){return"undefined"==typeof arguments[1]?{}.toString.call(arguments[0]).match(/\s([a-zA-Z]+)/)[1].toLowerCase():type(arguments[0])===String(""+arguments[1])?!0:!1},description:"Checks the input type"},a(b),b={name:"isElement",value:function(){if(!arguments[0]instanceof HTMLElement)return!1;if(arguments[1])switch(arguments[0].nodeType){case 1:return"ELEMENT_NODE";case 2:return"ATTRIBUTE_NODE";case 3:return"TEXT_NODE";case 4:return"CDATA_SECTION_NODE";case 5:return"ENTITY_REFERENCE_NODE";case 6:return"ENTITY_NODE";case 7:return"PROCESSING_INSTRUCTION_NODE";case 8:return"COMMENT_NODE";case 9:return"DOCUMENT_NODE";case 10:return"DOCUMENT_TYPE_NODE";case 11:return"DOCUMENT_FRAGMENT_NODE";case 12:return"NOTATION_NODE";default:return!1}return arguments[0].nodeType>=0?!0:!1},description:"checks if input is DOM element, returns true or false, OR if second parameter is true, it returns the type of DOM element"},a(b),b={name:"inside",value:function(){return"undefined"==typeof arguments[0]?!1:document.all[0].clientHeight-arguments[0]<0?!1:!0},description:"Checks if element is within window object by it's height"},a(b)}};Object.prototype.watch||(Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!0,value:function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&Object.defineProperty(this,a,{get:e,set:f,enumerable:!0,configurable:!0})}}),Object.watch.description="Creates a watcher for Object property when value is changed: property,function"),Object.prototype.unwatch||(Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!0,value:function(a){var b=this[a];delete this[a],this[a]=b}}),Object.unwatch.description="Deletes watcher for property"),JFcore.init();var Template=function(){};Template.add=function(){if("undefined"==typeof arguments[0])return!1;for(var a={},b=0;"object"==typeof a;)a=arguments[b],arguments[0].appendChild(this),b++},Template.draggable=function(a,b){a.dragging=null,a.configuration=b?b:{},JF.events.addListener(a,"mousedown",function(b){if("undefined"!==a.configuration.container){a.configuration.container.style.float="left";var c=a.configuration.container.getBoundingClientRect();a.container={left:parseInt(c.left),top:parseInt(c.top),right:parseInt(c.right),bottom:parseInt(c.bottom),width:parseInt(c.width),height:parseInt(c.height)}}else{var c=window.getBoundingClientRect();a.container={left:parseInt(c.left),top:parseInt(c.top),right:parseInt(c.right),bottom:parseInt(c.bottom),width:parseInt(c.width),height:parseInt(c.height)}}var b=window.event||b;a.style.position="relative",a.style.float="left";var d=a.getBoundingClientRect();a.dragging={mouseX:b.clientX,mouseY:b.clientY,startX:parseInt(d.left),startY:parseInt(d.top),width:parseInt(d.width),height:parseInt(a.getBoundingClientRect().height)},a.setCapture&&a.setCapture()},!0),JF.events.addListener(a,"losecapture",function(){a.dragging=null}),JF.events.addListener(window,"mouseup",function(){a.dragging=null,a.removeEventListener("onmouseup"),c.removeEventListener("onmousmove")},!0);var c=a.setCapture?a:window;JF.events.addListener(c,"mousemove",function(b){if(a.dragging){var b=window.event||b,c=b.clientY-a.container.top-a.getBoundingClientRect().height/2,d=b.clientX-a.container.left-a.getBoundingClientRect().width/2,e=d+a.dragging.width,f=c+a.dragging.height;e>=a.container.width||0>=d||(a.style.left=100*(d/a.container.width)+"%"),f>=a.container.height||0>=c||(a.style.top=100*(c/a.container.height)+"%")}},!0)},Template.addDragging=function(){if(!arguments[0]instanceof HTMLElement)return console.log("wrong input"),!1;var a=arguments[0];"undefined"!=typeof arguments[1]&&arguments[1],a.onmousedown=function(a){var b=a.srcElement,c=b.cloneNode(!0);JF.templates.page.html.insertBefore(c,JF.templates.page.html.firstChild);var d={container:JF.templates.page.html};Template.draggable(c,d)}},Template.createEvents=function(){try{Object.defineProperty(arguments[0],"text",{enumerable:!0,configurable:!0,set:function(){"string"==typeof arguments[0]?this.childNodes[0].textContent=arguments[0]:"object"==typeof arguments[0]&&this.appendChild(Creator(arguments[0]))},get:function(){return this.childNodes[0]?this.childNodes[0].textContent:void 0}}),Object.defineProperty(arguments[0],"class",{enumerable:!0,configurable:!0,set:function(){this.className=arguments[0]},get:function(){return this.className}})}catch(a){arguments[0].text=function(){var a=this;if("string"==typeof arguments[0])a.childNodes[0].textContent=arguments[0];else if("object"==typeof arguments[0])a.appendChild(Creator(arguments[0]));else if(a.childNodes)return a.childNodes[0].textContent}(),arguments[0]["class"]=function(){var a=this;if("string"==typeof arguments[0])a.childNodes[0].textContent=arguments[0];else{if("object"!=typeof arguments[0])return a.className;a.appendChild(Creator(arguments[0]))}}()}};var Controller=function(a,b,c,d){if("undefined"==typeof a)return!1;if("undefined"==typeof JF.controllers[a]&&(JF.controllers[a]={},JF.controllers[a].listeners=[]),"function"!=typeof c&&"string"!=typeof b&&"string"==typeof a){var e="Available commands: ",f="";for(var g in JF.controllers[a])"object"==typeof JF.controllers[a][g]&&(f+=g+";");return""!==f?e+f:"No available commands"}if("function"!=typeof c&&"string"==typeof b&&"string"==typeof a){if("undefined"==typeof JF.controllers[a][b])return JF.controllers[a].listeners.push(b),"No callbacks available. Adding to queue list. Once function gets in, it will be executed immidiatelly.";JF.controllers[a][b].callback()}else if("function"==typeof c&&"string"==typeof b&&"string"==typeof a){"undefined"==typeof JF.controllers[a][b]&&(JF.controllers[a][b]=[]),JF.controllers[a][b].callback=c;for(var h in JF.controllers[a].listeners)if(JF.controllers[a].listeners[h]===b){d===!1&&JF.controllers[a].listeners.splice(h,1),JF.controllers[a][b].callback();break}}return!0};Controller.init=function(){return void 0===JF?(delete Controller,!1):(JF.controllers=function(){},void 0)}();var Creator=function(){if("undefined"==typeof arguments[0])return!1;var a={},b=0,c=!1;arguments[0]instanceof HTMLElement?(a=arguments[0],c=!0,b=1):arguments[0][0]instanceof HTMLElement&&(a=arguments[0][0],c=!0,b=1);for(var d=arguments[b],e=[];d instanceof Object;){if(arguments[b].save===!0&&void 0!==JF.templates[arguments[b].id])f=JF.templates[arguments[b].id].html,e.push(arguments[b].id);else{var f=Creator.element(Creator.clone(arguments[b]));e.push(f.id)}if(c){if(a.appendChild(f),void 0!==JF.templates[f.id].funcArr)for(var g in JF.templates[f.id].funcArr){var h=JF.templates[f.id].funcArr[g].func,i=JF.templates[f.id].funcArr[g].element;"function"==typeof h&&h(i)}"function"==typeof f.onload&&f.onload()}b++,d=arguments[b]}return e};Creator.clone=function(){if(null===arguments[0]||"object"!=typeof arguments[0])return arguments[0];if(arguments[0]instanceof Date){var a=new Date;return a.setTime(arguments[0].getTime()),a}if(arguments[0]instanceof Array){for(var a=[],b=0,c=arguments[0].length;c>b;b++)a[b]=Creator.clone(arguments[0][b]);return a}if(arguments[0]instanceof Object){var a={};for(var d in arguments[0])arguments[0].hasOwnProperty(d)&&(a[d]=arguments[0][d]);return a}throw new Error("Unable to copy obj! Its type isn't supported.")},Creator.element=function(){if("object"==typeof arguments[0]){var b,c,d,e,a=arguments[0];if(void 0===arguments[2]){delete this.class,void 0===JF.templates&&Object.defineProperty(JF,"templates",{value:{}}),a.override===!0&&void 0!==a.id&&void 0!==JF.templates[a.id]&&JF.templates[a.id].remove(),void 0===a.id?a.id="JF"+Math.floor(1e3*Math.random())+Date.now()+"JF":void 0!==JF.templates[a.id]&&void 0===a.override&&(a.id="JF"+Math.floor(1e3*Math.random())+Date.now()+"JF"),a.id=a.id.replace(/ /g,""),this.id=a.id,this.cssRule="",this.elementHerachy="",JF.templates[this.id]={elements:{},name:this.id,html:{},funcArr:[],cssRules:[],template:Creator.clone(arguments[0])},JF.templates[this.id].remove=function(){if(void 0!==JF.templates[this.name].html?this.html.remove():"",JF.templates[this.name].cssRules=JF.templates[this.name].cssRules.reverse(),void 0!==JF.templates[this.name].cssRules[0])for(var a in JF.templates[this.name].cssRules)JF.templates[this.name].cssRules[a].remove();delete JF.templates[this.name]};var f=document.createDocumentFragment();b=document.createElement(a.element),f.appendChild(b);var g=0;this.elementHerachy=" "}else b=document.createElement(a.element),g=arguments[2]+1;if(this.type=a.element,void 0!==arguments[2]&&(this.parent===arguments[1]&&(this.elementHerachy=this.elementHerachy.split().reverse(),this.elementHerachy.shift(),this.elementHerachy=this.elementHerachy.reverse().join("")),this.elementHerachy+=" "+a.element),this.parent=arguments[1],"object"==typeof a){"undefined"!=typeof a.class?this.class=a.class:"","undefined"!=typeof a.id?b.name=a.id:"";for(var e in a)if("undefined"!=typeof a[e]&&null!==typeof a[e])if(this.class=void 0!==a[e].class?a[e].class:"","string"==typeof a[e]||"number"==typeof a[e]||"function"==typeof a[e])switch(e.toLowerCase()){case"text":b.textContent=a[e];break;case"name":b.setAttribute("name",a[e]);break;case"inlinestyle":try{if(a[e].search(";")>-1){var h=a[e].split(";");for(var i in h){var j=h[i].replace(";","").split(":");b.style[j[0]]=j[1]}}else{var j=a[e].replace(";","").split(":");b.style[j[0]]=j[1]}}catch(k){console.log(k)}break;case"style":this.cssRules="",c=void 0!==a.class?" ."+a.class.replace(" ","."):void 0!==this.class?" ."+this.class.replace(" ",".")+" ":"",d=void 0===arguments[2]?"#"+this.id+c+" { ":"#"+this.id+" { ",d+=a[e]+";",d+="}",this.cssRules+=" ###*###"+d+"; ";break;case"class":b.className=a[e];break;case"data":b[e]=a[e];break;default:"function"==typeof a[e]&&e.search("custom")>-1?JF.templates[this.id].funcArr.push({element:b,func:a[e]}):b[e]=a[e]}else if("object"==typeof a[e])if("style"===e.toLowerCase()){c=void 0!==a.class?" ."+a.class.replace(" ","."):this.elementHerachy,d=void 0===arguments[2]?"#"+this.id+" { ":"#"+this.id+c+" { ",d=d.replace("##","#");for(var l in a[e])"function"!=typeof a[e][l]&&(d+=l+":"+a[e][l]+";");d+="}",d=d.replace(" . "," "),this.cssRules+="........"+d}else if("inlinestyle"===e.toLowerCase()){for(var l in a[e])if("function"!=typeof a[e][l])try{b.style[l]=a[e][l].replace(";","")}catch(k){JF.debug(k)}}else if("data"===e)b.data=Creator.clone(a[e]);else{var m=e,n=Creator.element(a[e],a,g);b.appendChild(n),JF.templates[this.id].elements[m]=n,JF.templates[this.id].elements[m].prototype=Template.prototype,Template.createEvents(JF.templates[this.id].elements[m])}if(a.hasOwnProperty("dragging")&&a.dragging&&Template.addDragging(b),"undefined"==typeof f)return b;if(JF.templates[this.id].template=a,"number"!=typeof this.id){if(""!==this.cssRules&&void 0!==this.cssRules){var o=this.cssRules.split("........");delete o[0];for(var l in o){var p=o[l];"string"==typeof p&&void 0!==p&&""!==p&&" "!==p&&JF.templates[this.id].cssRules.push(JFstyle.addStyle(p))}}return this.cssRules="",JF.templates[this.id].html=b}if("true"!==a.save||a.save!==!0)return delete JF.templates[this.id],b}return!1}},Creator.createTemplate=function(a){var b,c;if("undefined"==typeof arguments[1])var d={},e=0;else e=arguments[1];if(a instanceof HTMLElement){d={element:a.localName,text:"undefined"==typeof a.childNodes[0]?"":a.childNodes[0].textContent},void 0!==a.name?d.name=a.name:"";for(c in a.attributes)if(a.attributes.hasOwnProperty(c)&&"length"!==c){var f=a.attributes[c].nodeName,g=a.attributes[c].textContent;d[f]=g}for(b in a.childNodes)a.childNodes.hasOwnProperty(b)&&"length"!==b&&1===a.childNodes[b].nodeType&&(e++,d[e]=Creator.createTemplate(a.childNodes[b],e))}return d},Creator.indexElements=function(a,b){var c;if(void 0===b&&(b={}),void 0===arguments[2])var d=0;else d=arguments[2];if(a instanceof HTMLElement)for(c in a.childNodes)a.childNodes.hasOwnProperty(c)&&"length"!==c&&1===a.childNodes[c].nodeType&&(b[d]=a.childNodes[c],d++,Creator.indexElements(a.childNodes[c],b,d));return b},Creator.indexHtml=function(){if("undefined"!==arguments[0]){for(var a=0,b={},c=arguments[a];c instanceof HTMLElement;)b={elements:Creator.indexElements(c),html:c,name:c.id||Math.round(Date.now()+1e3*Math.random()),template:Creator.createTemplate(c)},JF.templates[b.name]=b,console.warn("Created Object,'JF.templates."+b.name+"': ",JF.templates[b.name]),a++,c=arguments[a];return!0}},Creator.fillTemplate=function(){if(arguments[0]!==object||void 0===arguments[1])return JF.debug("Creator.fillTemplate: Wrong input arguments",arguments),void 0;var a=this;a.fillObject=function(b,c,d){for(var e in c)a.updateObject(b,c[e]);var f=b.cloneNode(!0);d.appendChild(f)},a.updateObject=function(a,b,c){var d=this;a.hasOwnProperty("name")&&a.name===b&&("string"==typeof c||"number"==typeof c?a.text=c.toLocaleString():"object"==typeof c&&(a=d.fillObject(a,c)));for(var e in a)"object"==typeof a[e]&&(void 0===a[e].nodeType?d.updateObject(a[e],b,c):a[e].name===b&&(a[e].text=c))},a.iterateOverrides=function(a,b){var c,d=this;for(c in b)if(b.hasOwnProperty(c)&&"function"!=typeof b[c]){var e=c,f=b[c];a.hasOwnProperty("name")&&a.name===e&&("string"==typeof f||"number"==typeof f?a.text=String(f):"object"==typeof f&&(a=d.fillObject(a,d.parent,f))),d.parent=a,d.updateObject(a,e,f)}},a.convertToObject=function(){var a=this;try{var b=JSON.parse(arguments[1]);a.iterateOverrides(arguments[0],b)}catch(c){console.warn(c)}};var b=typeof arguments[1];"string"===b?this.convertToObject(arguments[0],arguments[1]):"object"===b?this.iterateOverrides(arguments[0],arguments[1]):console.warn("non defined input")},Creator.init=function(){var a={id:"style",element:"style",defer:"defer",type:"text/css"};Creator(a);var b=document.getElementsByTagName("head")[0];b.insertBefore(JF.templates.style.html,b.childNodes[0]),delete JF.templates.templates}(),Object.defineProperty(this,"JFstyle",{enumerable:!0,configurable:!1,writable:!0,value:JF.templates.style.html.sheet}),delete JF.templates.style,JFstyle.addStyle=function(a){var b=JFstyle.rules.length;JFstyle.insertRule(a,b);var c={place:b,rule:JFstyle.rules[b]};return c.remove=function(){JFstyle.removeRule(this.place)},"string"==typeof arguments[1]&&JF.templates[arguments[1]].cssRules.push(c),c},JF.events.addListener=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent("on"+b,c)},JF.createEvents=function(){JF.mouse={status:!1},JF.keyboard={status:!1},JF.touch={status:!1},setMouseCoordinates=function(a){JF.mouse.status="moving",JF.mouse.event=a},setTouchCoordinates=function(a){JF.touch.status="moving",JF.touch.x=a.x,JF.touch.y=a.y,JF.touch.event=a},setMouseIdle=function(){JF.mouse.status="idle"},window.touchstart=function(){JF.touch.status="down"},window.touchend=function(){JF.touch.status="up"},window.touchenter=function(){JF.touch.status="enter"},window.touchleave=function(){JF.touch.status="leave"},window.touchmove=function(a){this.setTouchCoordinates(a),setTimeout(setMouseIdle,100)},window.onmousemove=function(a){this.setMouseCoordinates(a),setTimeout(setMouseIdle,100)},window.onmouseenter=function(){JF.mouse.state="enter",setTimeout(setMouseIdle,100)},window.onmousedown=function(){JF.mouse.status="down",setTimeout(setMouseIdle,100)},window.onmouseup=function(){JF.mouse.status="up",setTimeout(setMouseIdle,100)},window.onmouseleave=function(){JF.mouse.state="leave",setTimeout(setMouseIdle,100)}}(JF.initEvents=function(){"interactive"===document.readyState?setTimeout(JF.initEvents,100):"complete"===document.readyState&&JF.createEvents()}());
