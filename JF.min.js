/**
 * Copyright (C) 2014 Funisimo
 */
var JF=function(){};JF.debug=function(){if(typeof arguments[0]!=="undefined"){if(typeof JF.debug.items==="undefined"){JF.debug.items={}}JF.debug.items[Date()]={message:arguments[0],content:arguments[1]};return true}return JF.debug.items};var JFcore={init:function(){JFcore.createJF();JF.status="Init";JFcore.createGlobalFunctions();JFcore.createGlobalFunctions.description="Creates Global functions";JF.watch("status",JF.setStatus);JF.status="Done loading Framework";JFcore.init=null;JFcore=null},createJF:function(){JF.events={};JF.stringify=function(){var e=0;if(typeof arguments[1]!=="undefined"){e=arguments[1]+1}var t="{";for(var n in arguments[0]){switch(typeof arguments[0][n]){case"string":t+='"'+n+'"'+":"+'"'+arguments[0][n]+'",';break;case"object":t+='"'+n+'"'+":"+""+JF.stringify(arguments[0][n],e)+",";break;case"function":if(arguments[0].hasOwnProperty(n)){arguments[0][n]=arguments[0][n].toLocaleString().replace('"','"').replace(/(\r\n|\n|\r)/gm,"").replace(/\s+/g,"");t+='"'+n+'"'+":"+'"'+arguments[0][n]+'",';break}}}t+="}";t=t.replace(",}","}");return t};JF.private=function(){if(typeof arguments[0]==="undefined"||typeof arguments[1]==="undefined"||typeof arguments[2]==="undefined"){return false}Object.defineProperty(arguments[0],arguments[1],{writable:false,enumerable:false,configurable:false,value:arguments[2]})};JF.public=function(){if(typeof arguments[0]==="undefined"||typeof arguments[1]==="undefined"||typeof arguments[2]==="undefined"){return false}Object.defineProperty(arguments[0],arguments[1],{writable:true,enumerable:true,configurable:true,value:arguments[2]})};JF.setStatus=function(){status=arguments[2]};return true},createGlobalFunctions:function(){function e(){var e=arguments[0];if(typeof e==="undefined"){return false}else if(typeof e==="object"&&typeof e.value!=="undefined"&&typeof e.name!=="undefined"){JF.public(this,e.name,e.value);if(typeof JF.global==="undefined"){JF.public(JF,"global",[])}JF.global.push(e.name);if(typeof e.description!=="undefined"){e.name.description=e.description}}}var t={name:"log",value:function(){console.log(arguments)}};e(t);t={name:"clearTimeouts",value:function(){for(var e=1;e<1e3;e++){clearTimeout(e)}},description:"Clears all timeouts"};e(t);t={name:"type",value:function(){if(typeof arguments[1]==="undefined"){return{}.toString.call(arguments[0]).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}else if(type(arguments[0])===String(""+arguments[1])){return true}return false},description:"Checks the input type"};e(t);t={name:"isElement",value:function(){if(!arguments[0]instanceof HTMLElement){return false}if(arguments[1]){switch(arguments[0].nodeType){case 1:{return"ELEMENT_NODE"};case 2:{return"ATTRIBUTE_NODE"};case 3:{return"TEXT_NODE"};case 4:{return"CDATA_SECTION_NODE"};case 5:{return"ENTITY_REFERENCE_NODE"};case 6:{return"ENTITY_NODE"};case 7:{return"PROCESSING_INSTRUCTION_NODE"};case 8:{return"COMMENT_NODE"};case 9:{return"DOCUMENT_NODE"};case 10:{return"DOCUMENT_TYPE_NODE"};case 11:{return"DOCUMENT_FRAGMENT_NODE"};case 12:{return"NOTATION_NODE"};default:{return false}}}if(arguments[0].nodeType>=0){return true}else{return false}},description:"checks if input is DOM element, returns true or false, OR if second parameter is true, it returns the type of DOM element"};e(t);t={name:"inside",value:function(){if(typeof arguments[0]==="undefined"){return false}if(document.all[0].clientHeight-arguments[0]<0){return false}return true},description:"Checks if element is within window object by it's height"};e(t)}};if(!Object.prototype.watch){Object.defineProperty(Object.prototype,"watch",{enumerable:false,configurable:true,writable:true,value:function(e,t){var n=this[e],r=n,i=function(){return r},s=function(i){n=r;return r=t.call(this,e,n,i)};if(delete this[e]){Object.defineProperty(this,e,{get:i,set:s,enumerable:true,configurable:true})}}});Object.watch.description="Creates a watcher for Object property when value is changed: property,function"}if(!Object.prototype.unwatch){Object.defineProperty(Object.prototype,"unwatch",{enumerable:false,configurable:true,writable:true,value:function(e){var t=this[e];delete this[e];this[e]=t}});Object.unwatch.description="Deletes watcher for property"}JFcore.init();var Template=function(){};Template.add=function(){if(typeof arguments[0]==="undefined"){return false}var e={};var t=0;while(typeof e==="object"){e=arguments[t];arguments[0].appendChild(this);t++}};Template.draggable=function(e,t){e.dragging=null;if(t){e.configuration=t}else{e.configuration={}}JF.events.addListener(e,"mousedown",function(t){if(typeof e.configuration){if(e.configuration.container!=="undefined"){e.configuration.container.style.float="left";var n=e.configuration.container.getBoundingClientRect();e.container={left:parseInt(n.left),top:parseInt(n.top),right:parseInt(n.right),bottom:parseInt(n.bottom),width:parseInt(n.width),height:parseInt(n.height)}}else{var n=window.getBoundingClientRect();e.container={left:parseInt(n.left),top:parseInt(n.top),right:parseInt(n.right),bottom:parseInt(n.bottom),width:parseInt(n.width),height:parseInt(n.height)}}}var t=window.event||t;e.style.position="relative";e.style.float="left";var r=e.getBoundingClientRect();e.dragging={mouseX:t.clientX,mouseY:t.clientY,startX:parseInt(r.left),startY:parseInt(r.top),width:parseInt(r.width),height:parseInt(e.getBoundingClientRect().height)};if(e.setCapture)e.setCapture()},true);JF.events.addListener(e,"losecapture",function(){e.dragging=null});JF.events.addListener(window,"mouseup",function(t){e.dragging=null;e.removeEventListener("onmouseup");n.removeEventListener("onmousmove")},true);var n=e.setCapture?e:window;JF.events.addListener(n,"mousemove",function(t){if(!e.dragging)return;var t=window.event||t;var n=t.clientY-e.container.top-e.getBoundingClientRect().height/2;var r=t.clientX-e.container.left-e.getBoundingClientRect().width/2;var i=r+e.dragging.width;var s=n+e.dragging.height;if(i>=e.container.width||r<=0){}else{e.style.left=r/e.container.width*100+"%"}if(s>=e.container.height||n<=0){}else{e.style.top=n/e.container.height*100+"%"}},true)};Template.addDragging=function(){if(!arguments[0]instanceof HTMLElement){console.log("wrong input");return false}var e=arguments[0];if(typeof arguments[1]!=="undefined"){var t=arguments[1]}e.onmousedown=function(e){var t=e.srcElement;var n=t.cloneNode(true);JF.templates.page.html.insertBefore(n,JF.templates.page.html.firstChild);var r={container:JF.templates.page.html};Template.draggable(n,r)}};Template.createEvents=function(){try{Object.defineProperty(arguments[0],"text",{enumerable:true,configurable:true,set:function(){if(typeof arguments[0]==="string"){this.childNodes[0].textContent=arguments[0]}else if(typeof arguments[0]==="object"){this.appendChild(Creator(arguments[0]))}},get:function(){if(this.childNodes[0]){return this.childNodes[0].textContent}}});Object.defineProperty(arguments[0],"class",{enumerable:true,configurable:true,set:function(){this.className=arguments[0]},get:function(){return this.className}})}catch(e){arguments[0]["text"]=function(){var e=this;if(typeof arguments[0]==="string"){e.childNodes[0].textContent=arguments[0]}else if(typeof arguments[0]==="object"){e.appendChild(Creator(arguments[0]))}else{if(e.childNodes){return e.childNodes[0].textContent}}}();arguments[0]["class"]=function(){var e=this;if(typeof arguments[0]==="string"){e.childNodes[0].textContent=arguments[0]}else if(typeof arguments[0]==="object"){e.appendChild(Creator(arguments[0]))}else{return e.className}}()}};var Controller=function(e,t,n,r){if(typeof e==="undefined"){return false}if(typeof JF.controllers[e]==="undefined"){JF.controllers[e]={};JF.controllers[e].listeners=[]}if(typeof n!=="function"&&typeof t!=="string"&&typeof e==="string"){var i="Available commands: ";var s="";for(var o in JF.controllers[e]){if(typeof JF.controllers[e][o]==="object"){s+=o+";"}}return s!==""?i+s:"No available commands"}else if(typeof n!=="function"&&typeof t==="string"&&typeof e==="string"){if(typeof JF.controllers[e][t]!=="undefined"){JF.controllers[e][t].callback()}else{JF.controllers[e].listeners.push(t);return"No callbacks available. Adding to queue list. Once function gets in, it will be executed immidiatelly."}}else if(typeof n==="function"&&typeof t==="string"&&typeof e==="string"){if(typeof JF.controllers[e][t]==="undefined"){JF.controllers[e][t]=[]}JF.controllers[e][t].callback=n;for(var u in JF.controllers[e].listeners){if(JF.controllers[e].listeners[u]===t){if(r===false){JF.controllers[e].listeners.splice(u,1)}JF.controllers[e][t].callback();break}}}return true};Controller.init=function(){if(JF===undefined){delete Controller;return false}JF.controllers=function(){}}();var Creator=function(){if(typeof arguments[0]==="undefined"){return false}var e={};var t=0;var n=false;if(arguments[0]instanceof HTMLElement){e=arguments[0];n=true;t=1}var r=arguments[t];var i=[];while(r instanceof Object){if(arguments[t].save===true&&JF.templates[arguments[t].id]!==undefined){s=JF.templates[arguments[t].id].html;i.push(arguments[t].id)}else{var s=Creator.element(Creator.clone(arguments[t]));i.push(s.id)}if(n){e.appendChild(s);if(JF.templates[s.id].funcArr!==undefined){for(var o in JF.templates[s.id].funcArr){var u=JF.templates[s.id].funcArr[o].func;var a=JF.templates[s.id].funcArr[o].element;if(typeof u==="function"){u(a)}}}if(typeof s.onload==="function"){s.onload()}}t++;r=arguments[t]}return i};Creator.clone=function(){if(null===arguments[0]||"object"!==typeof arguments[0])return arguments[0];if(arguments[0]instanceof Date){var e=new Date;e.setTime(arguments[0].getTime());return e}if(arguments[0]instanceof Array){var e=[];for(var t=0,n=arguments[0].length;t<n;t++){e[t]=Creator.clone(arguments[0][t])}return e}if(arguments[0]instanceof Object){var e={};for(var r in arguments[0]){if(arguments[0].hasOwnProperty(r)){e[r]=arguments[0][r]}}return e}throw new Error("Unable to copy obj! Its type isn't supported.")};Creator.element=function(){if(typeof arguments[0]!=="object"){return}var e=arguments[0];var t;var n;var r;var i;if(arguments[2]===undefined){delete this.class;if(JF.templates===undefined){Object.defineProperty(JF,"templates",{value:{}})}if(e.override===true&&e.id!==undefined&&JF.templates[e.id]!==undefined){JF.templates[e.id].remove()}if(e.id===undefined){e.id="JF"+Math.floor(Math.random()*1e3)+Date.now()+"JF"}else if(JF.templates[e.id]!==undefined&&e.override===undefined){e.id="JF"+Math.floor(Math.random()*1e3)+Date.now()+"JF"}e.id=e.id.replace(/ /g,"");this.id=e.id;this.cssRule="";this.elementHerachy="";JF.templates[this.id]={elements:{},name:this.id,html:{},funcArr:[],cssRules:[],template:Creator.clone(arguments[0])};JF.templates[this.id].remove=function(){JF.templates[this.name].html!==undefined?this.html.remove():"";JF.templates[this.name].cssRules=JF.templates[this.name].cssRules.reverse();if(JF.templates[this.name].cssRules[0]!==undefined){for(var e in JF.templates[this.name].cssRules){JF.templates[this.name].cssRules[e].remove()}}delete JF.templates[this.name]};var s=document.createDocumentFragment();t=document.createElement(e.element);s.appendChild(t);var o=0;this.elementHerachy=" "}else{t=document.createElement(e.element);o=arguments[2]+1}this.type=e.element;if(arguments[2]!==undefined){if(this.parent===arguments[1]){this.elementHerachy=this.elementHerachy.split().reverse();this.elementHerachy.shift();this.elementHerachy=this.elementHerachy.reverse().join("")}this.elementHerachy+=" "+e.element}this.parent=arguments[1];if(typeof e==="object"){typeof e.class!=="undefined"?this.class=e.class:"";typeof e.id!=="undefined"?t.name=e.id:"";for(var i in e){if(typeof e[i]==="undefined"||typeof e[i]===null){continue}this.class=e[i].class!==undefined?e[i].class:"";if(typeof e[i]==="string"||typeof e[i]==="number"||typeof e[i]==="function"){switch(i.toLowerCase()){case"text":t["textContent"]=e[i];break;case"name":t.setAttribute("name",e[i]);break;case"inlinestyle":try{if(e[i].search(";")>-1){var u=e[i].split(";");for(var a in u){var f=u[a].replace(";","").split(":");t.style[f[0]]=f[1]}}else{var f=e[i].replace(";","").split(":");t.style[f[0]]=f[1]}}catch(l){console.log(l)}break;case"style":this.cssRules="";if(e.class!==undefined){n=" ."+e.class.replace(" ",".")}else{n=this.class!==undefined?" ."+this.class.replace(" ",".")+" ":""}if(arguments[2]===undefined){r="#"+this.id+n+" { "}else{r="#"+this.id+" { "}r+=e[i]+";";r+="}";this.cssRules+=" ###*###"+r+"; ";break;case"class":t["className"]=e[i];break;case"data":t[i]=e[i];break;default:if(typeof e[i]==="function"&&i.search("custom")>-1){JF.templates[this.id].funcArr.push({element:t,func:e[i]})}else{t[i]=e[i]}break}}else if(typeof e[i]==="object"){if(i.toLowerCase()==="style"){if(e.class!==undefined){n=" ."+e.class.replace(" ",".")}else{n=this.elementHerachy}if(arguments[2]===undefined){r="#"+this.id+" { "}else{r="#"+this.id+n+" { "}r=r.replace("##","#");for(var c in e[i]){if(typeof e[i][c]!=="function"){r+=c+":"+e[i][c]+";"}}r+="}";r=r.replace(" . "," ");this.cssRules+="........"+r}else if(i.toLowerCase()==="inlinestyle"){for(var c in e[i]){if(typeof e[i][c]!=="function"){try{t.style[c]=e[i][c].replace(";","")}catch(l){JF.debug(l)}}}}else if(i==="data"){t["data"]=Creator.clone(e[i])}else{var h=i;var p=Creator.element(e[i],e,o);t.appendChild(p);JF.templates[this.id].elements[h]=p;JF.templates[this.id].elements[h].prototype=Template.prototype;Template.createEvents(JF.templates[this.id].elements[h])}}}if(e.hasOwnProperty("dragging")){if(e["dragging"]){Template.addDragging(t)}}if(typeof s!=="undefined"){JF.templates[this.id].template=e;if(typeof this.id==="number"){if(e.save!=="true"||e.save!==true){delete JF.templates[this.id];return t}}else{if(this.cssRules!==""&&this.cssRules!==undefined){var d=this.cssRules.split("........");delete d[0];for(var c in d){var v=d[c];if(typeof v==="string"&&v!==undefined&&v!==""&&v!==" "){JF.templates[this.id].cssRules.push(JFstyle.addStyle(v))}}}this.cssRules="";return JF.templates[this.id].html=t}}else{return t}}return false};Creator.createTemplate=function(e){var t,n;if(typeof arguments[1]==="undefined"){var r={};var i=0}else{i=arguments[1]}if(e instanceof HTMLElement){r={element:e.localName,text:typeof e.childNodes[0]==="undefined"?"":e.childNodes[0].textContent};e.name!==undefined?r.name=e.name:"";for(n in e.attributes){if(e.attributes.hasOwnProperty(n)&&n!=="length"){var s=e.attributes[n].nodeName;var o=e.attributes[n].textContent;r[s]=o}}for(t in e.childNodes){if(e.childNodes.hasOwnProperty(t)&&t!=="length"){if(e.childNodes[t].nodeType===1){i++;r[i]=Creator.createTemplate(e.childNodes[t],i)}}}}return r};Creator.indexElements=function(e,t){var n;if(t===undefined){t={}}if(arguments[2]===undefined){var r=0}else{r=arguments[2]}if(e instanceof HTMLElement){for(n in e.childNodes){if(e.childNodes.hasOwnProperty(n)&&n!=="length"){if(e.childNodes[n].nodeType===1){t[r]=e.childNodes[n];r++;Creator.indexElements(e.childNodes[n],t,r)}}}}return t};Creator.indexHtml=function(){if(arguments[0]==="undefined"){return}var e=0;var t={};var n=arguments[e];while(n instanceof HTMLElement){t={elements:Creator.indexElements(n),html:n,name:n.id||Math.round(Date.now()+Math.random()*1e3),template:Creator.createTemplate(n)};JF.templates[t.name]=t;console.warn("Created Object,'JF.templates."+t.name+"': ",JF.templates[t.name]);e++;n=arguments[e]}return true};Creator.fillTemplate=function(){if(arguments[0]!==object||arguments[1]===undefined){JF.debug("Creator.fillTemplate: Wrong input arguments",arguments);return}var e=this;e.fillObject=function(t,n,r){for(var i in n){e.updateObject(t,n[i])}var s=t.cloneNode(true);r.appendChild(s)};e.updateObject=function(e,t,n){var r=this;if(e.hasOwnProperty("name")){if(e.name===t){if(typeof n==="string"||typeof n==="number"){e.text=n.toLocaleString()}else if(typeof n==="object"){e=r.fillObject(e,n)}}}for(var i in e){if(typeof e[i]==="object"){if(e[i].nodeType===undefined){r.updateObject(e[i],t,n)}else{if(e[i].name===t){e[i].text=n}}}}};e.iterateOverrides=function(e,t){var n;var r=this;for(n in t){if(t.hasOwnProperty(n)&&typeof t[n]!=="function"){var i=n;var s=t[n];if(e.hasOwnProperty("name")){if(e.name===i){if(typeof s==="string"||typeof s==="number"){e.text=String(s)}else if(typeof s==="object"){e=r.fillObject(e,r.parent,s)}}}r.parent=e;r.updateObject(e,i,s)}}};e.convertToObject=function(){var e=this;try{var t=JSON.parse(arguments[1]);e.iterateOverrides(arguments[0],t)}catch(n){console.warn(n)}};var t=typeof arguments[1];t==="string"?this.convertToObject(arguments[0],arguments[1]):t==="object"?this.iterateOverrides(arguments[0],arguments[1]):console.warn("non defined input")};Creator.init=function(){var e={id:"style",element:"style",defer:"defer",type:"text/css"};Creator(e);var t=document.getElementsByTagName("head")[0];t.insertBefore(JF.templates.style.html,t.childNodes[0]);delete JF.templates.templates}();Object.defineProperty(this,"JFstyle",{enumerable:true,configurable:false,writable:true,value:JF.templates.style.html.sheet});delete JF.templates.style;JFstyle.addStyle=function(e){var t=JFstyle.rules.length;JFstyle.insertRule(e,t);var n={place:t,rule:JFstyle.rules[t]};n.remove=function(){JFstyle.removeRule(this.place)};if(typeof arguments[1]==="string"){JF.templates[arguments[1]].cssRules.push(n)}return n};JF.events.addListener=function(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r)}else{e.attachEvent("on"+t,n)}};JF.createEvents=function(){JF.mouse={status:false};JF.keyboard={status:false};JF.touch={status:false};setMouseCoordinates=function(e){JF.mouse.status="moving";JF.mouse.event=e};setTouchCoordinates=function(e){JF.touch.status="moving";JF.touch.x=e.x;JF.touch.y=e.y;JF.touch.event=e};setMouseIdle=function(){JF.mouse.status="idle"};window.touchstart=function(e){JF.touch.status="down"};window.touchend=function(e){JF.touch.status="up"};window.touchenter=function(e){JF.touch.status="enter"};window.touchleave=function(e){JF.touch.status="leave"};window.touchmove=function(e){this.setTouchCoordinates(e);setTimeout(setMouseIdle,100)};window.onmousemove=function(e){this.setMouseCoordinates(e);setTimeout(setMouseIdle,100)};window.onmouseenter=function(){JF.mouse.state="enter";setTimeout(setMouseIdle,100)};window.onmousedown=function(){JF.mouse.status="down";setTimeout(setMouseIdle,100)};window.onmouseup=function(){JF.mouse.status="up";setTimeout(setMouseIdle,100)};window.onmouseleave=function(){JF.mouse.state="leave";setTimeout(setMouseIdle,100)}}(JF.initEvents=function(){if(document.readyState==="interactive"){var e=setTimeout(JF.initEvents,100)}else{if(document.readyState==="complete"){JF.createEvents()}}}())
